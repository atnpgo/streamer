{
    "version": 3,
    "sources": [
        "main.es6"
    ],
    "names": [
        "server",
        "janus",
        "screentest",
        "opaqueId",
        "Janus",
        "randomString",
        "myusername",
        "myid",
        "capture",
        "role",
        "room",
        "source",
        "spinner",
        "checkEnterShare",
        "field",
        "event",
        "theCode",
        "keyCode",
        "which",
        "charCode",
        "preShareScreen",
        "isExtensionEnabled",
        "alert",
        "window",
        "location",
        "reload",
        "$",
        "attr",
        "unbind",
        "val",
        "removeAttr",
        "click",
        "joinScreen",
        "navigator",
        "mozGetUserMedia",
        "shareScreen",
        "desc",
        "create",
        "send",
        "success",
        "result",
        "debug",
        "undefined",
        "log",
        "register",
        "history",
        "pushState",
        "on",
        "buildRoom",
        "modal",
        "checkEnterJoin",
        "roomid",
        "isNaN",
        "parseInt",
        "newRemoteFeed",
        "id",
        "display",
        "remoteFeed",
        "attach",
        "plugin",
        "pluginHandle",
        "getPlugin",
        "getId",
        "listen",
        "error",
        "onmessage",
        "msg",
        "jsep",
        "target",
        "document",
        "getElementById",
        "Spinner",
        "top",
        "spin",
        "toggleClass",
        "createAnswer",
        "media",
        "audioSend",
        "videoSend",
        "body",
        "onlocalstream",
        "stream",
        "onremotestream",
        "length",
        "append",
        "bind",
        "remove",
        "removeClass",
        "stop",
        "attachMediaStream",
        "get",
        "oncleanup",
        "len",
        "charSet",
        "i",
        "randomPoz",
        "Math",
        "floor",
        "random",
        "substring",
        "addSizeToGoogleProfilePic",
        "url",
        "indexOf",
        "getProfilePicUrl",
        "firebase",
        "auth",
        "currentUser",
        "photoURL",
        "getUserName",
        "displayName",
        "saveMessage",
        "messageText",
        "firestore",
        "collection",
        "add",
        "name",
        "text",
        "profilePicUrl",
        "timestamp",
        "FieldValue",
        "serverTimestamp",
        "console",
        "saveImageMessage",
        "file",
        "imageUrl",
        "then",
        "messageRef",
        "storage",
        "ref",
        "uid",
        "put",
        "fileSnapshot",
        "getDownloadURL",
        "update",
        "storageUri",
        "metadata",
        "fullPath",
        "deleteMessage",
        "div",
        "parentNode",
        "removeChild",
        "displayMessage",
        "picUrl",
        "messageListElement",
        "querySelector",
        "container",
        "createElement",
        "innerHTML",
        "firstChild",
        "setAttribute",
        "appendChild",
        "style",
        "backgroundImage",
        "textContent",
        "messageElement",
        "replace",
        "image",
        "addEventListener",
        "scrollTop",
        "scrollHeight",
        "src",
        "Date",
        "getTime",
        "setTimeout",
        "classList",
        "focus",
        "$btnSignIn",
        "signInWithPopup",
        "GoogleAuthProvider",
        "$btnSignOut",
        "signOut",
        "hide",
        "show",
        "onAuthStateChanged",
        "user",
        "e",
        "preventDefault",
        "stopPropagation",
        "input",
        "type",
        "accept",
        "onchange",
        "files",
        "match",
        "submit",
        "message",
        "currentTarget",
        "value",
        "toggle",
        "active",
        "fullscreenElement",
        "fullscreen",
        "webkitIsFullScreen",
        "mozIsFullScreen",
        "msIsFullScreen",
        "$btnFullscreen",
        "exitFullscreen",
        "webkitExitFullscreen",
        "mozExitFullscreen",
        "msExitFullscreen",
        "requestFullscreen",
        "webkitRequestFullscreen",
        "mozRequestFullscreen",
        "msRequestFullscreen",
        "query",
        "orderBy",
        "limit",
        "onSnapshot",
        "snapshot",
        "docChanges",
        "forEach",
        "change",
        "doc",
        "data",
        "init",
        "callback",
        "isWebrtcSupported",
        "html",
        "destroy",
        "consentDialog",
        "blockUI",
        "css",
        "border",
        "padding",
        "backgroundColor",
        "color",
        "unblockUI",
        "webrtcState",
        "parent",
        "unblock",
        "createOffer",
        "video",
        "videoRecv",
        "publish",
        "JSON",
        "stringify",
        "list",
        "f",
        "leaving",
        "handleRemoteJsep",
        "webrtcStuff",
        "pc",
        "iceConnectionState",
        "block",
        "empty",
        "destroyed",
        "hash",
        "backdrop",
        "keyboard"
    ],
    "mappings": "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",
    "sourcesContent": [
        "var server = null;\n//if (window.location.protocol === 'http:')\n//  server = \"http://\" + window.location.hostname + \":8088/janus\";\n//else\nserver = \"https://stream.atnpgo.wtf:8089/janus\";\n\n\nvar janus = null;\nvar screentest = null;\nvar opaqueId = \"screensharingtest-\" + Janus.randomString(12);\n\nvar myusername = null;\nvar myid = null;\n\nvar capture = null;\nvar role = null;\nvar room = null;\nvar source = null;\n\nvar spinner = null;\n\n\nfunction checkEnterShare(field, event) {\n    var theCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;\n    if (theCode == 13) {\n        preShareScreen();\n        return false;\n    } else {\n        return true;\n    }\n}\n\nfunction preShareScreen() {\n    if (!Janus.isExtensionEnabled()) {\n        alert(\"You're using Chrome but don't have the screensharing extension installed: click <b><a href='https://chrome.google.com/webstore/detail/janus-webrtc-screensharin/hapfgfdkleiggjjpfpenajgdnfckjpaj' target='_blank'>here</a></b> to do so\");\n        window.location.reload();\n        return;\n    }\n    // Create a new room\n    $('#desc').attr('disabled', true);\n    $('#create').attr('disabled', true).unbind('click');\n    $('#roomid').attr('disabled', true);\n    $('#join').attr('disabled', true).unbind('click');\n    if ($('#desc').val() === \"\") {\n        alert(\"Please insert a description for the room\");\n        $('#desc').removeAttr('disabled', true);\n        $('#create').removeAttr('disabled', true).click(preShareScreen);\n        $('#roomid').removeAttr('disabled', true);\n        $('#join').removeAttr('disabled', true).click(joinScreen);\n        return;\n    }\n    capture = \"screen\";\n    if (navigator.mozGetUserMedia) {\n        // Firefox needs a different constraint for screen and window sharing\n        capture = \"window\";\n        shareScreen();\n    } else {\n        shareScreen();\n    }\n}\n\nfunction shareScreen() {\n    // Create a new room\n    var desc = $('#desc').val();\n    role = \"publisher\";\n    var create = {\"request\": \"create\", \"description\": desc, \"bitrate\": 1000000, \"publishers\": 1};\n    screentest.send({\n        \"message\": create, success: function (result) {\n            var event = result[\"videoroom\"];\n            Janus.debug(\"Event: \" + event);\n            if (event != undefined && event != null) {\n                // Our own screen sharing session has been created, join it\n                room = result[\"room\"];\n                Janus.log(\"Screen sharing session created: \" + room);\n                myusername = randomString(12);\n                var register = {\"request\": \"join\", \"room\": room, \"ptype\": \"publisher\", \"display\": myusername};\n                screentest.send({\"message\": register});\n                history.pushState({}, room, \"#\" + room);\n                $('#no-stream-modal').on('hidden.bs.modal', () => buildRoom(room)).modal('hide');\n            }\n        }\n    });\n}\n\nfunction checkEnterJoin(field, event) {\n    var theCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;\n    if (theCode == 13) {\n        joinScreen();\n        return false;\n    } else {\n        return true;\n    }\n}\n\nfunction joinScreen() {\n    // Join an existing screen sharing session\n    $('#desc').attr('disabled', true);\n    $('#create').attr('disabled', true).unbind('click');\n    $('#roomid').attr('disabled', true);\n    $('#join').attr('disabled', true).unbind('click');\n    var roomid = $('#roomid').val();\n    if (isNaN(roomid)) {\n        alert(\"Session identifiers are numeric only\");\n        $('#desc').removeAttr('disabled', true);\n        $('#create').removeAttr('disabled', true).click(preShareScreen);\n        $('#roomid').removeAttr('disabled', true);\n        $('#join').removeAttr('disabled', true).click(joinScreen);\n        return;\n    }\n    room = parseInt(roomid);\n    role = \"listener\";\n    myusername = randomString(12);\n    var register = {\"request\": \"join\", \"room\": room, \"ptype\": \"publisher\", \"display\": myusername};\n    screentest.send({\"message\": register});\n}\n\nfunction newRemoteFeed(id, display) {\n    // A new feed has been published, create a new plugin handle and attach to it as a listener\n    source = id;\n    var remoteFeed = null;\n    janus.attach(\n        {\n            plugin: \"janus.plugin.videoroom\",\n            opaqueId: opaqueId,\n            success: function (pluginHandle) {\n                remoteFeed = pluginHandle;\n                Janus.log(\"Plugin attached! (\" + remoteFeed.getPlugin() + \", id=\" + remoteFeed.getId() + \")\");\n                Janus.log(\"  -- This is a subscriber\");\n                // We wait for the plugin to send us an offer\n                var listen = {\"request\": \"join\", \"room\": room, \"ptype\": \"listener\", \"feed\": id};\n                remoteFeed.send({\"message\": listen});\n            },\n            error: function (error) {\n                Janus.error(\"  -- Error attaching plugin...\", error);\n                alert(\"Error attaching plugin... \" + error);\n            },\n            onmessage: function (msg, jsep) {\n                Janus.debug(\" ::: Got a message (listener) :::\");\n                Janus.debug(msg);\n                var event = msg[\"videoroom\"];\n                Janus.debug(\"Event: \" + event);\n                if (event != undefined && event != null) {\n                    if (event === \"attached\") {\n                        // Subscriber created and attached\n                        if (spinner === undefined || spinner === null) {\n                            var target = document.getElementById('#screencapture');\n                            spinner = new Spinner({top: 100}).spin(target);\n                        } else {\n                            spinner.spin();\n                        }\n                        Janus.log(\"Successfully attached to feed \" + id + \" (\" + display + \") in room \" + msg[\"room\"]);\n                        $('#screenmenu').toggleClass('d-flex d-none');\n                        $('#room').toggleClass('d-flex d-none');\n                    } else {\n                        // What has just happened?\n                    }\n                }\n                if (jsep !== undefined && jsep !== null) {\n                    Janus.debug(\"Handling SDP as well...\");\n                    Janus.debug(jsep);\n                    // Answer and attach\n                    remoteFeed.createAnswer(\n                        {\n                            jsep: jsep,\n                            media: {audioSend: false, videoSend: false},\t// We want recvonly audio/video\n                            success: function (jsep) {\n                                Janus.debug(\"Got SDP!\");\n                                Janus.debug(jsep);\n                                var body = {\"request\": \"start\", \"room\": room};\n                                remoteFeed.send({\"message\": body, \"jsep\": jsep});\n                            },\n                            error: function (error) {\n                                Janus.error(\"WebRTC error:\", error);\n                                alert(\"WebRTC error... \" + error);\n                            }\n                        });\n                }\n            },\n            onlocalstream: function (stream) {\n                // The subscriber stream is recvonly, we don't expect anything here\n            },\n            onremotestream: function (stream) {\n                if ($('#screenvideo').length === 0) {\n                    // No remote video yet\n                    $('#screencapture').append('<video class=\"rounded centered\" id=\"waitingvideo\" width=\"100%\" height=\"100%\" />');\n                    $('#screencapture').append('<video class=\"rounded centered hide\" id=\"screenvideo\" width=\"100%\" height=\"100%\" autoplay playsinline/>');\n                    // Show the video, hide the spinner and show the resolution when we get a playing event\n                    $(\"#screenvideo\").bind(\"playing\", function () {\n                        $('#waitingvideo').remove();\n                        $('#screenvideo').removeClass('hide');\n                        if (spinner !== null && spinner !== undefined)\n                            spinner.stop();\n                        spinner = null;\n                    });\n                }\n                Janus.attachMediaStream($('#screenvideo').get(0), stream);\n            },\n            oncleanup: function () {\n                Janus.log(\" ::: Got a cleanup notification (remote feed \" + id + \") :::\");\n                $('#waitingvideo').remove();\n                if (spinner !== null && spinner !== undefined)\n                    spinner.stop();\n                spinner = null;\n            }\n        });\n}\n\n// Just an helper to generate random usernames\nfunction randomString(len, charSet) {\n    charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var randomString = '';\n    for (var i = 0; i < len; i++) {\n        var randomPoz = Math.floor(Math.random() * charSet.length);\n        randomString += charSet.substring(randomPoz, randomPoz + 1);\n    }\n    return randomString;\n}\n\nconst buildRoom = room => {\n    const addSizeToGoogleProfilePic = url => url.indexOf('googleusercontent.com') !== -1 && url.indexOf('?') === -1 ? url + '?sz=150' : url;\n    const getProfilePicUrl = () => firebase.auth().currentUser.photoURL || 'profile_placeholder.png';\n    const getUserName = () => firebase.auth().currentUser.displayName;\n\n    const saveMessage = messageText => firebase.firestore().collection(room).add({\n        name: getUserName(),\n        text: messageText,\n        profilePicUrl: getProfilePicUrl(),\n        timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    }).catch(error => console.error('Error writing new message to Firebase Database', error));\n\n    const saveImageMessage = file => firebase.firestore().collection(room).add({\n        name: getUserName(),\n        imageUrl: 'https://www.google.com/images/spin-32.gif?a',\n        profilePicUrl: getProfilePicUrl(),\n        timestamp: firebase.firestore.FieldValue.serverTimestamp()\n    }).then(messageRef => firebase.storage().ref(firebase.auth().currentUser.uid + '/' + messageRef.id + '/' + file.name).put(file)\n        .then(fileSnapshot => fileSnapshot.ref.getDownloadURL()\n            .then(url => messageRef.update({\n                imageUrl: url,\n                storageUri: fileSnapshot.metadata.fullPath\n            })))).catch(error => console.error('There was an error uploading a file to Cloud Storage:', error));\n\n    const deleteMessage = id => {\n        const div = document.getElementById(id);\n        if (div) {\n            div.parentNode.removeChild(div);\n        }\n    };\n\n    const displayMessage = (id, timestamp, name, text, picUrl, imageUrl) => {\n        const messageListElement = document.querySelector('.chat');\n        let div = document.getElementById(id);\n        // If an element for that message does not exists yet we create it.\n        if (!div) {\n            const container = document.createElement('div');\n            container.innerHTML = '<div class=\"message-container\"><div class=\"pic\"></div><div><div class=\"name\"></div><div class=\"message\"></div></div></div>';\n            div = container.firstChild;\n            div.setAttribute('id', id);\n            div.setAttribute('timestamp', timestamp);\n            messageListElement.appendChild(div);\n        }\n        if (picUrl) {\n            div.querySelector('.pic').style.backgroundImage = 'url(' + addSizeToGoogleProfilePic(picUrl) + ')';\n        }\n        div.querySelector('.name').textContent = name;\n        const messageElement = div.querySelector('.message');\n        if (text) { // If the message is text.\n            messageElement.textContent = text;\n            // Replace all line breaks by <br>.\n            messageElement.innerHTML = messageElement.innerHTML.replace(/\\n/g, '<br>');\n        } else if (imageUrl) { // If the message is an image.\n            const image = document.createElement('img');\n            image.addEventListener('load', () => messageListElement.scrollTop = messageListElement.scrollHeight);\n            image.src = imageUrl + '&' + new Date().getTime();\n            messageElement.innerHTML = '';\n            messageElement.appendChild(image);\n        }\n        // Show the card fading-in and scroll to view the new message.\n        setTimeout(() => div.classList.add('visible'), 1);\n        messageListElement.scrollTop = messageListElement.scrollHeight;\n        document.querySelector('input').focus();\n    };\n\n    const $btnSignIn = $('#btn-sign-in').click(() => firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider()));\n    const $btnSignOut = $('#btn-sign-out').click(() => firebase.auth().signOut());\n\n    $btnSignOut.hide();\n    $btnSignIn.show();\n    firebase.auth().onAuthStateChanged(user => {\n        if (user) {\n            $btnSignOut.show();\n            $btnSignIn.hide();\n            $('#form-send-message input').removeAttr('disabled').attr('placeholder', 'Message');\n            $('#form-send-message button').removeAttr('disabled');\n            document.querySelector('#name').innerHTML = getUserName();\n            document.querySelector('#pfp').src = addSizeToGoogleProfilePic(getProfilePicUrl());\n        } else {\n            $btnSignOut.hide();\n            $btnSignIn.show();\n            $('#form-send-message input').attr('disabled', 'disabled').attr('placeholder', 'Please sign in to send messages');\n            $('#form-send-message button').attr('disabled', 'disabled');\n            document.querySelector('#name').innerHTML = 'Please sign in <i class=\"fas fa-arrow-right\"></i>';\n            document.querySelector('#pfp').src = 'profile_placeholder.png';\n        }\n    });\n    $('#btn-add-image').click(e => {\n        e.preventDefault();\n        e.stopPropagation();\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = 'image/png, image/jpeg, image/gif';\n        input.onchange = e => {\n            const file = e.target.files[0];\n            if (!file.type.match('image.*')) {\n                alert('You can only share images');\n                return;\n            }\n            saveImageMessage(file)\n        };\n        input.click();\n    });\n\n    $('#form-send-message').submit(e => {\n        e.preventDefault();\n        e.stopPropagation();\n        const message = e.currentTarget.querySelector('input').value;\n        e.currentTarget.querySelector('input').value = '';\n        saveMessage(message);\n    });\n\n    const toggle = () => $('.fa-expand-arrows-alt,.fa-compress-arrows-alt').toggleClass('fa-expand-arrows-alt fa-compress-arrows-alt');\n    document.addEventListener('fullscreenchange', toggle, false);\n    document.addEventListener('webkitfullscreenchange', toggle, false);\n    document.addEventListener('mozfullscreenchange', toggle, false);\n    document.addEventListener('msfullscreenchange', toggle, false);\n    const active = () => {\n        if (document.fullscreenElement != null) {\n            return true;\n        } else if (document.fullscreen) {\n            return document.fullscreen;\n        } else if (document.webkitIsFullScreen) {\n            return document.webkitIsFullScreen;\n        } else if (document.mozIsFullScreen) {\n            return document.mozIsFullScreen;\n        } else if (document.msIsFullScreen) {\n            return document.msIsFullScreen;\n        } else {\n            return false;\n        }\n    };\n\n    const $btnFullscreen = $('#btn-fullscreen').click(() => {\n        if (active()) {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            } else if (document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            } else if (document.mozExitFullscreen) {\n                document.mozExitFullscreen();\n            } else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            }\n        } else {\n            if (document.body.requestFullscreen) {\n                document.body.requestFullscreen();\n            } else if (document.body.webkitRequestFullscreen) {\n                document.body.webkitRequestFullscreen();\n            } else if (document.body.mozRequestFullscreen) {\n                document.body.mozRequestFullscreen();\n            } else if (document.body.msRequestFullscreen) {\n                document.body.msRequestFullscreen();\n            } else {\n                $btnFullscreen.hide();\n                alert('Please use your browser\\'s fullscreen.');\n            }\n        }\n    });\n\n    const query = firebase.firestore()\n        .collection(room)\n        .orderBy('timestamp', 'asc')\n        .limit(25);\n    query.onSnapshot(snapshot => snapshot.docChanges().forEach(change => {\n        if (change.type === 'removed') {\n            deleteMessage(change.doc.id);\n        } else {\n            const message = change.doc.data();\n            displayMessage(change.doc.id, message.timestamp, message.name, message.text, message.profilePicUrl, message.imageUrl);\n        }\n    }));\n    document.querySelector('#container').classList.add('visible');\n};\n\n(() => {\n\n    Janus.init({\n        debug: \"all\", callback: function () {\n            // Use a button to start the demo\n            // Make sure the browser supports WebRTC\n            if (!Janus.isWebrtcSupported()) {\n                alert(\"No WebRTC support... \");\n                return;\n            }\n            // Create session\n            janus = new Janus(\n                {\n                    server: server,\n                    success: function () {\n                        // Attach to video room test plugin\n                        janus.attach(\n                            {\n                                plugin: \"janus.plugin.videoroom\",\n                                opaqueId: opaqueId,\n                                success: function (pluginHandle) {\n                                    $('#details').remove();\n                                    screentest = pluginHandle;\n                                    Janus.log(\"Plugin attached! (\" + screentest.getPlugin() + \", id=\" + screentest.getId() + \")\");\n                                    // Prepare the username registration\n                                    $('#screenmenu').removeClass('hide').show();\n                                    $('#createnow').removeClass('hide').show();\n                                    $('#create').click(preShareScreen);\n                                    $('#joinnow').removeClass('hide').show();\n                                    $('#join').click(joinScreen);\n                                    $('#desc').focus();\n                                    $('#start').removeAttr('disabled').html(\"Stop\")\n                                        .click(function () {\n                                            $(this).attr('disabled', true);\n                                            janus.destroy();\n                                        });\n                                },\n                                error: function (error) {\n                                    Janus.error(\"  -- Error attaching plugin...\", error);\n                                    alert(\"Error attaching plugin... \" + error);\n                                },\n                                consentDialog: function (on) {\n                                    Janus.debug(\"Consent dialog should be \" + (on ? \"on\" : \"off\") + \" now\");\n                                    if (on) {\n                                        // Darken screen\n                                        $.blockUI({\n                                            message: '',\n                                            css: {\n                                                border: 'none',\n                                                padding: '15px',\n                                                backgroundColor: 'transparent',\n                                                color: '#aaa'\n                                            }\n                                        });\n                                    } else {\n                                        // Restore screen\n                                        $.unblockUI();\n                                    }\n                                },\n                                webrtcState: function (on) {\n                                    Janus.log(\"Janus says our WebRTC PeerConnection is \" + (on ? \"up\" : \"down\") + \" now\");\n                                    $(\"#screencapture\").parent().unblock();\n                                    if (on) {\n                                        alert(\"Your screen sharing session just started: pass the <b>\" + room + \"</b> session identifier to those who want to attend.\");\n                                    } else {\n                                        alert(\"Your screen sharing session just stopped.\");\n                                        janus.destroy();\n                                        window.location.reload();\n                                    }\n                                },\n                                onmessage: function (msg, jsep) {\n                                    Janus.debug(\" ::: Got a message (publisher) :::\");\n                                    Janus.debug(msg);\n                                    var event = msg[\"videoroom\"];\n                                    Janus.debug(\"Event: \" + event);\n                                    if (event != undefined && event != null) {\n                                        if (event === \"joined\") {\n                                            myid = msg[\"id\"];\n                                            $('#session').html(room);\n                                            $('#title').html(msg[\"description\"]);\n                                            Janus.log(\"Successfully joined room \" + msg[\"room\"] + \" with ID \" + myid);\n                                            if (role === \"publisher\") {\n                                                // This is our session, publish our stream\n                                                Janus.debug(\"Negotiating WebRTC stream for our screen (capture \" + capture + \")\");\n                                                screentest.createOffer(\n                                                    {\n                                                        media: {video: capture, audioSend: true, videoRecv: false},\t// Screen sharing Publishers are sendonly\n                                                        success: function (jsep) {\n                                                            Janus.debug(\"Got publisher SDP!\");\n                                                            Janus.debug(jsep);\n                                                            var publish = {\"request\": \"configure\", \"audio\": true, \"video\": true};\n                                                            screentest.send({\"message\": publish, \"jsep\": jsep});\n                                                        },\n                                                        error: function (error) {\n                                                            Janus.error(\"WebRTC error:\", error);\n                                                            alert(\"WebRTC error... \" + JSON.stringify(error));\n                                                        }\n                                                    });\n                                            } else {\n                                                // We're just watching a session, any feed to attach to?\n                                                if (msg[\"publishers\"] !== undefined && msg[\"publishers\"] !== null) {\n                                                    var list = msg[\"publishers\"];\n                                                    Janus.debug(\"Got a list of available publishers/feeds:\");\n                                                    Janus.debug(list);\n                                                    for (var f in list) {\n                                                        var id = list[f][\"id\"];\n                                                        var display = list[f][\"display\"];\n                                                        Janus.debug(\"  >> [\" + id + \"] \" + display);\n                                                        newRemoteFeed(id, display)\n                                                    }\n                                                }\n                                            }\n                                        } else if (event === \"event\") {\n                                            // Any feed to attach to?\n                                            if (role === \"listener\" && msg[\"publishers\"] !== undefined && msg[\"publishers\"] !== null) {\n                                                var list = msg[\"publishers\"];\n                                                Janus.debug(\"Got a list of available publishers/feeds:\");\n                                                Janus.debug(list);\n                                                for (var f in list) {\n                                                    var id = list[f][\"id\"];\n                                                    var display = list[f][\"display\"];\n                                                    Janus.debug(\"  >> [\" + id + \"] \" + display);\n                                                    newRemoteFeed(id, display)\n                                                }\n                                            } else if (msg[\"leaving\"] !== undefined && msg[\"leaving\"] !== null) {\n                                                // One of the publishers has gone away?\n                                                var leaving = msg[\"leaving\"];\n                                                Janus.log(\"Publisher left: \" + leaving);\n                                                if (role === \"listener\" && msg[\"leaving\"] === source) {\n                                                    alert(\"The screen sharing session is over, the publisher left\");\n                                                    window.location.reload();\n                                                }\n                                            } else if (msg[\"error\"] !== undefined && msg[\"error\"] !== null) {\n                                                alert(msg[\"error\"]);\n                                            }\n                                        }\n                                    }\n                                    if (jsep !== undefined && jsep !== null) {\n                                        Janus.debug(\"Handling SDP as well...\");\n                                        Janus.debug(jsep);\n                                        screentest.handleRemoteJsep({jsep: jsep});\n                                    }\n                                },\n                                onlocalstream: function (stream) {\n                                    Janus.debug(\" ::: Got a local stream :::\");\n                                    Janus.debug(stream);\n                                    $('#screenmenu').toggleClass('d-flex d-none');\n                                    $('#room').toggleClass('d-flex d-none');\n                                    if ($('#screenvideo').length === 0) {\n                                        $('#screencapture').append('<video class=\"rounded centered\" id=\"screenvideo\" width=\"100%\" height=\"100%\" autoplay playsinline muted=\"muted\"/>');\n                                    }\n                                    Janus.attachMediaStream($('#screenvideo').get(0), stream);\n                                    if (screentest.webrtcStuff.pc.iceConnectionState !== \"completed\" &&\n                                        screentest.webrtcStuff.pc.iceConnectionState !== \"connected\") {\n                                        $(\"#screencapture\").parent().block({\n                                            message: '<b>Publishing...</b>',\n                                            css: {\n                                                border: 'none',\n                                                backgroundColor: 'transparent',\n                                                color: 'white'\n                                            }\n                                        });\n                                    }\n                                },\n                                onremotestream: function (stream) {\n                                    // The publisher stream is sendonly, we don't expect anything here\n                                },\n                                oncleanup: function () {\n                                    Janus.log(\" ::: Got a cleanup notification :::\");\n                                    $('#screencapture').empty();\n                                    $(\"#screencapture\").parent().unblock();\n                                    $('#room').toggleClass('d-flex d-none');\n                                }\n                            });\n                    },\n                    error: function (error) {\n                        Janus.error(error);\n                        alert(error);\n                        window.location.reload();\n                    },\n                    destroyed: function () {\n                        window.location.reload();\n                    }\n                });\n        }\n    });\n\n    const room = window.location.hash.substring(1);\n    if (room.length === 0) {\n        $('#no-stream-modal').modal({\n            backdrop: 'static',\n            keyboard: false\n        });\n    } else {\n        buildRoom(room);\n    }\n\n\n})();\n"
    ],
    "file": "main.js"
}
