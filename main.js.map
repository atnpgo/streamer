{
    "version": 3,
    "sources": [
        "main.es6"
    ],
    "names": [
        "addSizeToGoogleProfilePic",
        "url",
        "indexOf",
        "isUserSignedIn",
        "firebase",
        "auth",
        "currentUser",
        "getProfilePicUrl",
        "photoURL",
        "getUserName",
        "displayName",
        "saveMessage",
        "messageText",
        "firestore",
        "collection",
        "add",
        "name",
        "text",
        "profilePicUrl",
        "timestamp",
        "FieldValue",
        "serverTimestamp",
        "error",
        "console",
        "saveImageMessage",
        "file",
        "imageUrl",
        "then",
        "messageRef",
        "storage",
        "ref",
        "uid",
        "id",
        "put",
        "fileSnapshot",
        "getDownloadURL",
        "update",
        "storageUri",
        "metadata",
        "fullPath",
        "loadMessages",
        "query",
        "orderBy",
        "limit",
        "onSnapshot",
        "snapshot",
        "docChanges",
        "forEach",
        "change",
        "type",
        "deleteMessage",
        "doc",
        "message",
        "data",
        "displayMessage",
        "div",
        "document",
        "getElementById",
        "parentNode",
        "removeChild",
        "picUrl",
        "messageListElement",
        "querySelector",
        "container",
        "createElement",
        "innerHTML",
        "firstChild",
        "setAttribute",
        "appendChild",
        "style",
        "backgroundImage",
        "textContent",
        "messageElement",
        "replace",
        "image",
        "addEventListener",
        "scrollTop",
        "scrollHeight",
        "src",
        "Date",
        "getTime",
        "setTimeout",
        "classList",
        "focus",
        "$",
        "ready",
        "$btnSignIn",
        "click",
        "signInWithPopup",
        "GoogleAuthProvider",
        "$btnSignOut",
        "signOut",
        "hide",
        "show",
        "onAuthStateChanged",
        "user",
        "removeAttr",
        "attr",
        "e",
        "preventDefault",
        "stopPropagation",
        "input",
        "accept",
        "onchange",
        "target",
        "files",
        "match",
        "alert",
        "submit",
        "currentTarget",
        "value",
        "toggle",
        "toggleClass",
        "active",
        "fullscreenElement",
        "fullscreen",
        "webkitIsFullScreen",
        "mozIsFullScreen",
        "msIsFullScreen",
        "$btnFullscreen",
        "exitFullscreen",
        "webkitExitFullscreen",
        "mozExitFullscreen",
        "msExitFullscreen",
        "body",
        "requestFullscreen",
        "webkitRequestFullscreen",
        "mozRequestFullscreen",
        "msRequestFullscreen"
    ],
    "mappings": "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",
    "sourcesContent": [
        "const addSizeToGoogleProfilePic = url => url.indexOf('googleusercontent.com') !== -1 && url.indexOf('?') === -1 ? url + '?sz=150' : url;\nconst isUserSignedIn = () => !!firebase.auth().currentUser;\nconst getProfilePicUrl = () => firebase.auth().currentUser.photoURL || 'profile_placeholder.png';\nconst getUserName = () => firebase.auth().currentUser.displayName;\n\nconst saveMessage = messageText => firebase.firestore().collection('messages').add({\n    name: getUserName(),\n    text: messageText,\n    profilePicUrl: getProfilePicUrl(),\n    timestamp: firebase.firestore.FieldValue.serverTimestamp()\n}).catch(error => console.error('Error writing new message to Firebase Database', error));\n\nconst saveImageMessage = file => firebase.firestore().collection('messages').add({\n    name: getUserName(),\n    imageUrl: 'https://www.google.com/images/spin-32.gif?a',\n    profilePicUrl: getProfilePicUrl(),\n    timestamp: firebase.firestore.FieldValue.serverTimestamp()\n}).then(messageRef => firebase.storage().ref(firebase.auth().currentUser.uid + '/' + messageRef.id + '/' + file.name).put(file)\n    .then(fileSnapshot => fileSnapshot.ref.getDownloadURL()\n        .then(url => messageRef.update({\n            imageUrl: url,\n            storageUri: fileSnapshot.metadata.fullPath\n        })))).catch(error => console.error('There was an error uploading a file to Cloud Storage:', error));\n\n\nconst loadMessages = () => {\n    // Create the query to load the last 12 messages and listen for new ones.\n    const query = firebase.firestore()\n        .collection('messages')\n        .orderBy('timestamp', 'asc')\n        .limit(25);\n\n    // Start listening to the query.\n    query.onSnapshot(snapshot => snapshot.docChanges().forEach(change => {\n        if (change.type === 'removed') {\n            deleteMessage(change.doc.id);\n        } else {\n            const message = change.doc.data();\n            displayMessage(change.doc.id, message.timestamp, message.name, message.text, message.profilePicUrl, message.imageUrl);\n        }\n    }));\n};\n\nconst deleteMessage = id => {\n    const div = document.getElementById(id);\n    if (div) {\n        div.parentNode.removeChild(div);\n    }\n};\n\nconst displayMessage = (id, timestamp, name, text, picUrl, imageUrl) => {\n    const messageListElement = document.querySelector('.chat');\n    let div = document.getElementById(id);\n    // If an element for that message does not exists yet we create it.\n    if (!div) {\n        const container = document.createElement('div');\n        container.innerHTML = '<div class=\"message-container\"><div class=\"pic\"></div><div><div class=\"name\"></div><div class=\"message\"></div></div></div>';\n        div = container.firstChild;\n        div.setAttribute('id', id);\n        div.setAttribute('timestamp', timestamp);\n        messageListElement.appendChild(div);\n    }\n    if (picUrl) {\n        div.querySelector('.pic').style.backgroundImage = 'url(' + addSizeToGoogleProfilePic(picUrl) + ')';\n    }\n    div.querySelector('.name').textContent = name;\n    const messageElement = div.querySelector('.message');\n    if (text) { // If the message is text.\n        messageElement.textContent = text;\n        // Replace all line breaks by <br>.\n        messageElement.innerHTML = messageElement.innerHTML.replace(/\\n/g, '<br>');\n    } else if (imageUrl) { // If the message is an image.\n        const image = document.createElement('img');\n        image.addEventListener('load', () => messageListElement.scrollTop = messageListElement.scrollHeight);\n        image.src = imageUrl + '&' + new Date().getTime();\n        messageElement.innerHTML = '';\n        messageElement.appendChild(image);\n    }\n    // Show the card fading-in and scroll to view the new message.\n    setTimeout(() => div.classList.add('visible'), 1);\n    messageListElement.scrollTop = messageListElement.scrollHeight;\n    document.querySelector('input').focus();\n};\n\n\n$(document).ready(() => {\n    const $btnSignIn = $('#btn-sign-in').click(() => firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider()));\n    const $btnSignOut = $('#btn-sign-out').click(() => firebase.auth().signOut());\n\n    $btnSignOut.hide();\n    $btnSignIn.show();\n\n    firebase.auth().onAuthStateChanged(user => {\n        if (user) {\n            $btnSignOut.show();\n            $btnSignIn.hide();\n            $('input').removeAttr('disabled').attr('placeholder', 'Message');\n            $('#form-send-message button').removeAttr('disabled');\n            //saveMessagingDeviceToken();\n        } else {\n            $btnSignOut.hide();\n            $btnSignIn.show();\n            $('input').attr('disabled', 'disabled').attr('placeholder', 'Please sign in to send messages');\n            $('#form-send-message button').attr('disabled', 'disabled');\n        }\n    });\n\n    $('#btn-add-image').click(e => {\n        e.preventDefault();\n        e.stopPropagation();\n        const input = document.createElement('input');\n        input.type = 'file';\n        input.accept = 'image/png, image/jpeg, image/gif';\n        input.onchange = e => {\n            const file = e.target.files[0];\n            if (!file.type.match('image.*')) {\n                alert('You can only share images');\n                return;\n            }\n            saveImageMessage(file)\n        };\n        input.click();\n    });\n\n    $('#form-send-message').submit(e => {\n        e.preventDefault();\n        e.stopPropagation();\n        const message = e.currentTarget.querySelector('input').value;\n        e.currentTarget.querySelector('input').value = '';\n        saveMessage(message);\n    });\n\n    const toggle = () => $('.fa-expand-arrows-alt,.fa-compress-arrows-alt').toggleClass('fa-expand-arrows-alt fa-compress-arrows-alt');\n    document.addEventListener('fullscreenchange', toggle, false);\n    document.addEventListener('webkitfullscreenchange', toggle, false);\n    document.addEventListener('mozfullscreenchange', toggle, false);\n    document.addEventListener('msfullscreenchange', toggle, false);\n    const active = () => {\n        if (document.fullscreenElement != null) {\n            return true;\n        } else if (document.fullscreen) {\n            return document.fullscreen;\n        } else if (document.webkitIsFullScreen) {\n            return document.webkitIsFullScreen;\n        } else if (document.mozIsFullScreen) {\n            return document.mozIsFullScreen;\n        } else if (document.msIsFullScreen) {\n            return document.msIsFullScreen;\n        } else {\n            return false;\n        }\n    };\n    const $btnFullscreen = $('#btn-fullscreen').click(() => {\n        if (active()) {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            } else if (document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            } else if (document.mozExitFullscreen) {\n                document.mozExitFullscreen();\n            } else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            }\n        } else {\n            if (document.body.requestFullscreen) {\n                document.body.requestFullscreen();\n            } else if (document.body.webkitRequestFullscreen) {\n                document.body.webkitRequestFullscreen();\n            } else if (document.body.mozRequestFullscreen) {\n                document.body.mozRequestFullscreen();\n            } else if (document.body.msRequestFullscreen) {\n                document.body.msRequestFullscreen();\n            } else {\n                $btnFullscreen.hide();\n                alert('Please use your browser\\'s fullscreen.');\n            }\n        }\n    });\n\n    loadMessages();\n});"
    ],
    "file": "main.js"
}